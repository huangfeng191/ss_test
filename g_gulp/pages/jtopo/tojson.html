<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<script src="jquery-1.11.1.min.js"></script>
<script src="jtopo-0.4.8-min.js"></script>
<!-- <script src="http://www.jtopo.com/demo/js/toolbar.js"></script> -->

<body>

    <body>
        <button onclick="getJson()">getJson</button>
        <div style="border:1px red solid;">
            <canvas id="canvas" width="1000px" height="880px"></canvas>
        </div>

    </body>
    <script>
        var node;
        $(document).ready(function () {
            var canvas = document.getElementById('canvas');
            var json ={
    "version": "0.4.8",
    "frames": 24,
    "wheelZoom": null,
    "childs": [{
        "elementType": "scene",
        "background": "http://127.0.0.1:3000/pages/jtopo/host.png",
        "backgroundColor": "255,255,255",
        "mode": "normal",
        "paintAll": false,
        "areaSelect": true,
        "translate": true,
        "translateX": 25,
        "translateY": 74,
        "lastTranslatedX": undefined,
        "lastTranslatedY": undefined,
        "alpha": 0,
        "visible": true,
        "scaleX": 1,
        "scaleY": 1,
        "childs": [{
            "elementType": "node",
            "x": 120,
            "y": 50,
            "width": 40,
            "height": 40,
            "visible": true,
            "alpha": 1,
            "rotate": 0,
            "scaleX": 1,
            "scaleY": 1,
            "strokeColor": "22,124,255",
            "fillColor": "0, 0, 255",
            "shadow": true,
            "shadowColor": "rgba(0,0,0,0.5)",
            "shadowOffsetX": 3,
            "shadowOffsetY": 6,
            "transformAble": true,
            "zIndex": 3,
            "dragable": true,
            "selected": false,
            "showSelected": true,
            "isMouseOver": false,
            "text": "Top_Left",
            "font": "12px Consolas",
            "fontColor": "255,255,255",
            "textPosition": "Top_Left",
            "textOffsetX": 0,
            "textOffsetY": 0,
            "borderRadius": null,
            "isAlarmCover": true,
            "imagesrc": null
        }, {
            "elementType": "node",
            "x": 260,
            "y": 50,
            "width": 40,
            "height": 40,
            "visible": true,
            "alpha": 1,
            "rotate": 0,
            "scaleX": 1,
            "scaleY": 1,
            "strokeColor": "22,124,255",
            "fillColor": "0, 0, 255",
            "shadow": true,
            "shadowColor": "rgba(0,0,0,0.5)",
            "shadowOffsetX": 3,
            "shadowOffsetY": 6,
            "transformAble": true,
            "zIndex": 3,
            "dragable": true,
            "selected": false,
            "showSelected": true,
            "isMouseOver": false,
            "text": "Top_Center",
            "font": "12px Consolas",
            "fontColor": "255,255,255",
            "textPosition": "Top_Center",
            "textOffsetX": 0,
            "textOffsetY": 0,
            "borderRadius": null,
            "isAlarmCover": true,
            "imagesrc": null
        }, {
            "elementType": "node",
            "x": 400,
            "y": 50,
            "width": 40,
            "height": 40,
            "visible": true,
            "alpha": 1,
            "rotate": 0,
            "scaleX": 1,
            "scaleY": 1,
            "strokeColor": "22,124,255",
            "fillColor": "0, 0, 255",
            "shadow": true,
            "shadowColor": "rgba(0,0,0,0.5)",
            "shadowOffsetX": 3,
            "shadowOffsetY": 6,
            "transformAble": true,
            "zIndex": 3,
            "dragable": true,
            "selected": false,
            "showSelected": true,
            "isMouseOver": false,
            "text": "Top_Right",
            "font": "12px Consolas",
            "fontColor": "255,255,255",
            "textPosition": "Top_Right",
            "textOffsetX": 0,
            "textOffsetY": 0,
            "borderRadius": null,
            "isAlarmCover": true,
            "imagesrc": null
        }, {
            "elementType": "node",
            "x": 120,
            "y": 190,
            "width": 40,
            "height": 40,
            "visible": true,
            "alpha": 1,
            "rotate": 0,
            "scaleX": 1,
            "scaleY": 1,
            "strokeColor": "22,124,255",
            "fillColor": "0, 0, 255",
            "shadow": true,
            "shadowColor": "rgba(0,0,0,0.5)",
            "shadowOffsetX": 3,
            "shadowOffsetY": 6,
            "transformAble": true,
            "zIndex": 3,
            "dragable": true,
            "selected": false,
            "showSelected": true,
            "isMouseOver": false,
            "text": "Middle_Left",
            "font": "12px Consolas",
            "fontColor": "255,255,255",
            "textPosition": "Middle_Left",
            "textOffsetX": 0,
            "textOffsetY": 0,
            "borderRadius": null,
            "isAlarmCover": true,
            "imagesrc": null
        }, {
            "elementType": "node",
            "x": 260,
            "y": 190,
            "width": 40,
            "height": 40,
            "visible": true,
            "alpha": 1,
            "rotate": 0,
            "scaleX": 1,
            "scaleY": 1,
            "strokeColor": "22,124,255",
            "fillColor": "0, 0, 255",
            "shadow": true,
            "shadowColor": "rgba(0,0,0,0.5)",
            "shadowOffsetX": 3,
            "shadowOffsetY": 6,
            "transformAble": true,
            "zIndex": 3,
            "dragable": true,
            "selected": false,
            "showSelected": true,
            "isMouseOver": false,
            "text": "Middle_Center",
            "font": "12px Consolas",
            "fontColor": "255,255,255",
            "textPosition": "Middle_Center",
            "textOffsetX": 0,
            "textOffsetY": 0,
            "borderRadius": null,
            "isAlarmCover": true,
            "imagesrc": null
        }, {
            "elementType": "node",
            "x": 564,
            "y": 109,
            "width": 40,
            "height": 40,
            "visible": true,
            "alpha": 1,
            "rotate": 0,
            "scaleX": 1,
            "scaleY": 1,
            "strokeColor": "22,124,255",
            "fillColor": "0, 0, 255",
            "shadow": true,
            "shadowColor": "rgba(0,0,0,0.5)",
            "shadowOffsetX": 3,
            "shadowOffsetY": 6,
            "transformAble": true,
            "zIndex": 3,
            "dragable": true,
            "selected": false,
            "showSelected": true,
            "isMouseOver": false,
            "text": "Middle_Right",
            "font": "12px Consolas",
            "fontColor": "255,255,255",
            "textPosition": "Middle_Right",
            "textOffsetX": 0,
            "textOffsetY": 0,
            "borderRadius": null,
            "isAlarmCover": true,
            "imagesrc": null
        }, {
            "elementType": "node",
            "x": 120,
            "y": 330,
            "width": 40,
            "height": 40,
            "visible": true,
            "alpha": 1,
            "rotate": 0,
            "scaleX": 1,
            "scaleY": 1,
            "strokeColor": "22,124,255",
            "fillColor": "0, 0, 255",
            "shadow": true,
            "shadowColor": "rgba(0,0,0,0.5)",
            "shadowOffsetX": 3,
            "shadowOffsetY": 6,
            "transformAble": true,
            "zIndex": 3,
            "dragable": true,
            "selected": false,
            "showSelected": true,
            "isMouseOver": false,
            "text": "Bottom_Left",
            "font": "12px Consolas",
            "fontColor": "255,255,255",
            "textPosition": "Bottom_Left",
            "textOffsetX": 0,
            "textOffsetY": 0,
            "borderRadius": null,
            "isAlarmCover": true,
            "imagesrc": null
        }, {
            "elementType": "node",
            "x": 260,
            "y": 330,
            "width": 40,
            "height": 40,
            "visible": true,
            "alpha": 1,
            "rotate": 0,
            "scaleX": 1,
            "scaleY": 1,
            "strokeColor": "22,124,255",
            "fillColor": "0, 0, 255",
            "shadow": true,
            "shadowColor": "rgba(0,0,0,0.5)",
            "shadowOffsetX": 3,
            "shadowOffsetY": 6,
            "transformAble": true,
            "zIndex": 3,
            "dragable": true,
            "selected": false,
            "showSelected": true,
            "isMouseOver": false,
            "text": "Bottom_Center",
            "font": "12px Consolas",
            "fontColor": "255,255,255",
            "textPosition": "Bottom_Center",
            "textOffsetX": 0,
            "textOffsetY": 0,
            "borderRadius": null,
            "isAlarmCover": true,
            "imagesrc": null
        }, {
            "elementType": "node",
            "x": 400,
            "y": 330,
            "width": 40,
            "height": 40,
            "visible": true,
            "alpha": 1,
            "rotate": 0,
            "scaleX": 1,
            "scaleY": 1,
            "strokeColor": "22,124,255",
            "fillColor": "0, 0, 255",
            "shadow": true,
            "shadowColor": "rgba(0,0,0,0.5)",
            "shadowOffsetX": 3,
            "shadowOffsetY": 6,
            "transformAble": true,
            "zIndex": 3,
            "dragable": true,
            "selected": false,
            "showSelected": true,
            "isMouseOver": false,
            "text": "Bottom_Right",
            "font": "12px Consolas",
            "fontColor": "255,255,255",
            "textPosition": "Bottom_Right",
            "textOffsetX": 0,
            "textOffsetY": 0,
            "borderRadius": null,
            "isAlarmCover": true,
            "imagesrc": null
        }, {
            "elementType": "CircleNode",
            "x": 650,
            "y": 200,
            "width": 32,
            "height": 32,
            "visible": true,
            "alpha": 1,
            "rotate": 0,
            "scaleX": 1,
            "scaleY": 1,
            "strokeColor": "22,124,255",
            "fillColor": "0, 0, 0",
            "shadow": true,
            "shadowColor": "rgba(0,0,0,0.5)",
            "shadowOffsetX": 3,
            "shadowOffsetY": 6,
            "transformAble": true,
            "zIndex": 3,
            "dragable": true,
            "selected": false,
            "showSelected": true,
            "isMouseOver": false,
            "text": "左下偏移",
            "font": "12px Consolas",
            "fontColor": "255,255,255",
            "textPosition": "Middle_Center",
            "textOffsetX": -30,
            "textOffsetY": 30,
            "borderRadius": null,
            "isAlarmCover": true,
            "imagesrc": null
        }]
    }]
}
            var stage = JTopo.createStageFromJson(json, canvas);
            //显示工具栏
            // showJTopoToobar(stage);

            var jsonStr = stage.toJson();
            console.log(jsonStr);

            getJson=function(){
                console.log(stage.toJson())
            }

        });

    </script>

</html>