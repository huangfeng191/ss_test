<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
  <link rel="stylesheet" type="text/css" href="../less/test.css" />
  <script src="../lib/jquery-1.11.1.min.js"></script>
  <script src="../js/test.js"></script>
</head>
<style>
  #message,#message1{
    margin-top: 100px ;
    border:1px red solid;
    height: 300px;
    width: 100%;
  }

</style>

<body>
  <div>
    <button onclick="doAjax()">doAjax</button>

    <input id="inp1">

    <div id="message">


    </div>
    <div id="message1">


      </div>

  </div>
</body>
<script>


$(document).ajaxError(function(jE,xhr,setting,other){
  console.log("3"+3);
  // debugger
})


$.ajaxPrefilter(function( options, originalOptions, jqXHR ) {
console.log("preFilter"+"1");
jqXHR.abort();

})
function doAjax(params) {




  
    $.ajax({
      url: "http://127.0.0.1:91",
      // async: false,
      timeout: 1*1000,
      data: JSON.stringify({
        "query": {
        }
      }),
      beforeSend:function(x){
      },
      error:function(err){

        
      } 
    }).done(function(ret){
      debugger
      // alert();
        if(ret.Response){
          ret=ret.Response;
        }
        $("#message").html(JSON.stringify(ret));
        $("#message1").html(ret.need);
    }).fail(function(ret){
      console.log("err 2");
    })


  }


  $(function() {

  



  });
</script>

</html