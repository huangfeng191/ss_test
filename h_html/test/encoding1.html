<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <!-- <script src="../js/SM4.js"></script> -->
    <script src="../js/SM4Encrpt1.js"></script>

</head>
<style>
textarea{
    width:200px;
    height:200px;
}
</style>
<body>
    <input onchange="doCoding()" ><button onclick="doCoding()">coding</button>
<textarea></textarea>
<textarea></textarea>
    
<script>
    
// var s4=new SM4Util();

/* *
 * 本JavaScript为国密sm4加密/解密的JavaScript实现 ，本类的核心方法为encrpt与decrpt，分别对应加密与解密。本类的具体使用方式如下
 * var test = new SM4Encrpt({   //实例化解密类
 *      （key/keyStr）:***,//指定的数组加密/解密密钥数组/密钥字符串，此参数若是加密可以省略，加密密钥由本类自动生成；若是解密必须指定该密钥
 *      bytes/enStr:*** //需要加密/解密的二进制/字符串
 * });
 * test.encrpt();//此为加密方法
 * test.encrpt(100);//此为加密100次
 * test.decrpt();//此为解密方法
 * test.decrpt(100);此为解密100次
 * 以上为标准的加密解密过程
 * 
 * 其他可供外部调用的方法如下：
 * test.getResultStr();//获取加密/解密后的字符串
 * test.getkeyStr();//获取当前加密或者解密的密钥字符串
 */

function doCoding() {


    var str= document.getElementsByTagName("input")[0].value;
    
   //  加密
var firstEncrpt=new SM4Encrpt({ enstr:str }).getEncodeString();
document.getElementsByTagName("textarea")[0].value=firstEncrpt

firstEncrpt="l8zljgFTxYsgfOuU8WY7Ol7RPBdpHarAtV5v33bjuj4="
// 解密
var pwd = new SM4Encrpt({ enstr:firstEncrpt, base64:true }).getDecodeString();  

  
  document.getElementsByTagName("textarea")[1].value=pwd;
//   alert(test1.decrpt())
 
}


    </script>


</body>
</html>